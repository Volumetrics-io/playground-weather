<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Weather</title>
  <meta name="description" content="MR.js example">
  <script src="https://cdn.jsdelivr.net/gh/volumetrics-io/mrjs@latest/dist/build.js"></script>
  <style>
    mr-app * {
      display: none;
    }
  </style>
</head>

<body>
  <button onclick="run()">Get weather</button>
  <div id="weatherdata"></div>

  <script>
    const run = () => {
      navigator.geolocation.getCurrentPosition((pos) => {

        document.querySelector("#weatherdata").innerHTML = "fetching";
        const endpoint = "https://fcc-weather-api.glitch.me/api/current?lat=" + pos.coords.latitude + "&lon=" + pos.coords.longitude;

        fetch(endpoint)
          .then(response => response.json())
          .then(data => {
            console.log(data);
            document.getElementById("weatherdata").innerHTML = `
<h1>${data.name}, ${data.sys.country}</h1>
<p>${data.main.temp}Â°C</p>
<p>Desc: ${data.weather[0].description}</p>
            `;
          });
      });
    }
  </script>

</body>

</html>
